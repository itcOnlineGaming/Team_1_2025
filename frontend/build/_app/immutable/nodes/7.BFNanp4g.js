import"../chunks/DsnmJJEf.js";import{i as Ae}from"../chunks/cVA9912C.js";import{a as Be,o as He,s as _}from"../chunks/CIQPcZhh.js";import{R as Ne,Y as c,T as ue,Z as s,_ as i,U as l,V as Se,W as k,o as Z,a5 as ce,$ as e,g as t,a0 as D,S as Ue}from"../chunks/trG2P9-e.js";import{i as y}from"../chunks/TCXrzA7w.js";import{e as X,i as ee}from"../chunks/DtEgrblv.js";import{s as Me}from"../chunks/BnkvbMZy.js";import{s as he}from"../chunks/OSfEqomL.js";import{t as Ye}from"../chunks/B1WTyiZY.js";import{g as be,b as de}from"../chunks/UzgXwaK6.js";function je(){be(`${de}/templates/create`)}async function Ge(v,o,d,b,E){if(t(o))try{const C=await fetch(`${de}/api/templates/${t(o).id}`,{method:"DELETE"});if(C.ok)k(d,t(d).filter(P=>P.id!==t(o)?.id)),b(),console.log("Template deleted successfully");else{const P=await C.text();k(E,`Error deleting template: ${P}`)}}catch(C){k(E,`Error deleting template: ${C}`)}}function Oe(){history.back()}var We=c('<div class="error-message svelte-1s3ihfi"> </div>'),Ze=c('<div class="loading svelte-1s3ihfi"><div class="spinner svelte-1s3ihfi"></div> <p class="svelte-1s3ihfi">Loading templates...</p></div>'),Fe=c('<div class="empty-state svelte-1s3ihfi"><p class="svelte-1s3ihfi">ğŸ“‹ No templates available</p> <p class="empty-subtext svelte-1s3ihfi">Create your first template to get started</p></div>'),Je=(v,o,d)=>o(t(d)),Ke=c('<span class="type-icon svelte-1s3ihfi"> </span>'),Xe=c('<span class="type-icon svelte-1s3ihfi" title="Has ratings">â­</span>'),et=(v,o,d)=>o(t(d),v),tt=(v,o,d)=>o(t(d),v),st=c('<button class="btn-icon btn-delete svelte-1s3ihfi" title="Delete template" type="button">ğŸ—‘ï¸</button>'),at=c('<div class="template-card card svelte-1s3ihfi"><div class="card-header svelte-1s3ihfi"><h3 class="svelte-1s3ihfi"> </h3> <span class="badge badge-info svelte-1s3ihfi"> </span></div> <p class="card-description svelte-1s3ihfi"> </p> <div class="card-footer svelte-1s3ihfi"><span class="template-id svelte-1s3ihfi"> </span> <div class="question-types svelte-1s3ihfi"><!> <!></div></div> <div class="card-actions svelte-1s3ihfi"><button class="btn-icon btn-edit svelte-1s3ihfi" title="Edit template" type="button">âœï¸</button> <!></div></div>'),it=c('<div class="template-grid svelte-1s3ihfi"></div>'),rt=(v,o)=>v.key==="Escape"&&o(),vt=v=>v.stopPropagation(),lt=v=>v.stopPropagation(),ot=c('<div class="modal-description svelte-1s3ihfi"><p class="svelte-1s3ihfi"> </p></div>'),nt=c('<span class="badge badge-accent svelte-1s3ihfi"> </span>'),ct=c('<span class="badge badge-required svelte-1s3ihfi">Required</span>'),dt=c('<li class="svelte-1s3ihfi"> </li>'),_t=c('<div class="options-preview svelte-1s3ihfi"><span class="options-label svelte-1s3ihfi">Options:</span> <ul class="svelte-1s3ihfi"></ul></div>'),pt=c('<div class="question-preview svelte-1s3ihfi"><div class="question-preview-header svelte-1s3ihfi"><span class="badge badge-info svelte-1s3ihfi"></span> <span class="badge badge-secondary svelte-1s3ihfi"> </span> <!> <!></div> <p class="question-label svelte-1s3ihfi"> </p> <!></div>'),ft=(v,o,d)=>o(t(d)),ut=c('<div class="modal-overlay svelte-1s3ihfi" role="presentation"><div class="modal-content card svelte-1s3ihfi" role="dialog"><div class="modal-header svelte-1s3ihfi"><div class="svelte-1s3ihfi"><h2 class="svelte-1s3ihfi"> </h2> <p class="modal-subtitle svelte-1s3ihfi"> </p></div> <button class="btn-close svelte-1s3ihfi" type="button">âœ•</button></div> <!> <div class="modal-body svelte-1s3ihfi"><h3 class="svelte-1s3ihfi"> </h3> <!></div> <div class="modal-footer svelte-1s3ihfi"><button class="btn-secondary svelte-1s3ihfi" type="button">Close</button> <button class="btn-primary svelte-1s3ihfi" type="button">Use This Template</button></div></div></div>'),ht=(v,o)=>v.key==="Escape"&&o(),bt=v=>v.stopPropagation(),mt=v=>v.stopPropagation(),gt=c('<div class="modal-overlay svelte-1s3ihfi" role="presentation"><div class="modal-content card delete-modal svelte-1s3ihfi" role="alertdialog"><div class="modal-header svelte-1s3ihfi"><h2 class="svelte-1s3ihfi">Delete Template</h2> <button class="btn-close svelte-1s3ihfi" type="button">âœ•</button></div> <div class="modal-body svelte-1s3ihfi"><div class="delete-warning svelte-1s3ihfi"><svg class="warning-icon svelte-1s3ihfi" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" class="svelte-1s3ihfi"></path></svg> <p class="delete-message svelte-1s3ihfi">Are you sure you want to delete <strong class="svelte-1s3ihfi"> </strong>?</p> <p class="delete-submessage svelte-1s3ihfi">This action cannot be undone. The template and all its questions will be permanently removed.</p></div></div> <div class="modal-footer svelte-1s3ihfi"><button class="btn-secondary svelte-1s3ihfi" type="button">Cancel</button> <button class="btn-danger svelte-1s3ihfi" type="button">Yes, Delete Template</button></div></div></div>'),yt=c('<div class="template-library svelte-1s3ihfi"><div class="header svelte-1s3ihfi"><div class="header-left svelte-1s3ihfi"><button class="btn-back svelte-1s3ihfi" title="Go back">â† Back</button> <h2 class="svelte-1s3ihfi">Template Library</h2></div> <button class="btn-success svelte-1s3ihfi">+ Create Template</button></div> <!> <!></div> <!> <!>',1);function Rt(v,o){Ne(o,!1);let d=Z([]),b=Z(null),E=Z(null),C=Z(!0),P=Z("");He(()=>{try{k(d,Ye.templates),k(C,!1)}catch(a){k(P,`Error loading templates: ${a}`),k(C,!1)}});function me(a,r){r.stopPropagation(),he.set(a),be(`${de}/templates/edit/${a.id}`)}function ge(a){k(b,a)}function U(){k(b,null)}function ye(a){a&&(he.set(a),U())}function ke(a,r){r.stopPropagation(),k(E,a)}function M(){k(E,null)}function we(a){switch(a){case"text":return"ğŸ“";case"textarea":return"ğŸ“„";case"select":return"ğŸ“‹";case"number":return"ğŸ”¢";case"none":return"â­";default:return"â“"}}function xe(a){switch(a){case"stars":return"â­";case"slider":return"ğŸšï¸";case"emoji":return"ğŸ˜Š";case"numeric":return"ğŸ”¢";default:return"â­"}}function Te(a){return a?a.charAt(0).toUpperCase()+a.slice(1):"Stars"}Ae();var _e=yt(),te=ue(_e),se=s(te),ae=s(se),$e=s(ae);$e.__click=[Oe],ce(2),e(ae);var De=i(ae,2);De.__click=[je],e(se);var pe=i(se,2);{var Ee=a=>{var r=We(),u=s(r,!0);e(r),D(()=>_(u,t(P))),l(a,r)};y(pe,a=>{t(P)&&a(Ee)})}var Ce=i(pe,2);{var Pe=a=>{var r=Ze();l(a,r)},Le=a=>{var r=Ue(),u=ue(r);{var x=p=>{var w=Fe();l(p,w)},q=p=>{var w=it();X(w,5,()=>t(d),ee,(I,f)=>{var L=at();L.__click=[Je,ge,f];var T=s(L),R=s(T),Q=s(R,!0);e(R);var B=i(R,2),ie=s(B);e(B),e(T);var Y=i(T,2),F=s(Y,!0);e(Y);var H=i(Y,2),j=s(H),V=s(j);e(j);var n=i(j,2),z=s(n);X(z,1,()=>[...new Set(t(f).questions.map(h=>h.type))],ee,(h,m)=>{var S=Ke(),W=s(S,!0);e(S),D(ve=>{Me(S,"title",t(m)),_(W,ve)},[()=>we(t(m))]),l(h,S)});var A=i(z,2);{var G=h=>{var m=Xe();l(h,m)};y(A,h=>{t(f).questions.some(m=>m.stars)&&h(G)})}e(n),e(H);var O=i(H,2),N=s(O);N.__click=[et,me,f];var re=i(N,2);{var J=h=>{var m=st();m.__click=[tt,ke,f],l(h,m)};y(re,h=>{t(d).length>1&&h(J)})}e(O),e(L),D(()=>{_(Q,t(f).name),_(ie,`${t(f).questions.length??""} Q`),_(F,t(f).description||"No description provided"),_(V,`ID: ${t(f).id??""}`)}),l(I,L)}),e(w),l(p,w)};y(u,p=>{t(d).length===0?p(x):p(q,!1)},!0)}l(a,r)};y(Ce,a=>{t(C)?a(Pe):a(Le,!1)})}e(te);var fe=i(te,2);{var Re=a=>{var r=ut();r.__click=U,r.__keydown=[rt,U];var u=s(r);u.__click=[vt],u.__keydown=[lt];var x=s(u),q=s(x),p=s(q),w=s(p,!0);e(p);var I=i(p,2),f=s(I);e(I),e(q);var L=i(q,2);L.__click=U,e(x);var T=i(x,2);{var R=V=>{var n=ot(),z=s(n),A=s(z,!0);e(z),e(n),D(()=>_(A,t(b).description)),l(V,n)};y(T,V=>{t(b).description&&V(R)})}var Q=i(T,2),B=s(Q),ie=s(B);e(B);var Y=i(B,2);X(Y,1,()=>t(b).questions,ee,(V,n,z)=>{var A=pt(),G=s(A),O=s(G);O.textContent=`Q${z+1}`;var N=i(O,2),re=s(N,!0);e(N);var J=i(N,2);{var h=g=>{var $=nt(),K=s($);e($),D((le,oe)=>_(K,`${le??""}
                                    ${oe??""} Rating`),[()=>xe(t(n).starType),()=>Te(t(n).starType)]),l(g,$)};y(J,g=>{(t(n).stars||t(n).type==="none")&&g(h)})}var m=i(J,2);{var S=g=>{var $=ct();l(g,$)};y(m,g=>{t(n).required&&g(S)})}e(G);var W=i(G,2),ve=s(W,!0);e(W);var Qe=i(W,2);{var Ve=g=>{var $=_t(),K=i(s($),2);X(K,5,()=>t(n).options,ee,(le,oe)=>{var ne=dt(),ze=s(ne,!0);e(ne),D(()=>_(ze,t(oe))),l(le,ne)}),e(K),e($),l(g,$)};y(Qe,g=>{t(n).type==="select"&&t(n).options&&g(Ve)})}e(A),D(()=>{_(re,t(n).type),_(ve,t(n).label)}),l(V,A)}),e(Q);var F=i(Q,2),H=s(F);H.__click=U;var j=i(H,2);j.__click=[ft,ye,b],e(F),e(u),e(r),D(()=>{_(w,t(b).name),_(f,`Template ID: ${t(b).id??""}`),_(ie,`Questions (${t(b).questions.length??""})`)}),l(a,r)};y(fe,a=>{t(b)&&a(Re)})}var qe=i(fe,2);{var Ie=a=>{var r=gt();r.__click=M,r.__keydown=[ht,M];var u=s(r);u.__click=[bt],u.__keydown=[mt];var x=s(u),q=i(s(x),2);q.__click=M,e(x);var p=i(x,2),w=s(p),I=i(s(w),2),f=i(s(I)),L=s(f);e(f),ce(),e(I),ce(2),e(w),e(p);var T=i(p,2),R=s(T);R.__click=M;var Q=i(R,2);Q.__click=[Ge,E,d,M,P],e(T),e(u),e(r),D(()=>_(L,`"${t(E).name??""}"`)),l(a,r)};y(qe,a=>{t(E)&&a(Ie)})}l(v,_e),Se()}Be(["click","keydown"]);export{Rt as component};

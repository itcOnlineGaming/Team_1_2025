import"../chunks/DsnmJJEf.js";import{a as Bt,o as Et,s as o}from"../chunks/CIQPcZhh.js";import{R as It,X as y,a1 as qt,Y as m,T as Ct,Z as e,_ as s,U as b,V as Pt,g as i,W as x,$ as t,a0 as h,a2 as Vt,a3 as Yt,a4 as rt}from"../chunks/trG2P9-e.js";import{i as S}from"../chunks/TCXrzA7w.js";import{e as Gt,i as Ht}from"../chunks/DtEgrblv.js";import{s as dt,a as Jt}from"../chunks/DrsKJ8O4.js";import{g as Wt,b as Xt}from"../chunks/UzgXwaK6.js";import{S as Zt}from"../chunks/DWOU39ch.js";function nt(){Wt(`${Xt}/`)}function zt(){confirm("Are you sure you want to delete all session data? This cannot be undone.")&&(dt.clearAllSessions(),alert("All session data has been cleared."))}var Ft=m('<div class="empty-state card svelte-bxfdlt"><div class="empty-icon svelte-bxfdlt">ğŸ“­</div> <h2 class="svelte-bxfdlt">No Sessions Yet</h2> <p class="svelte-bxfdlt">Start your first session to see results and analytics here.</p> <button class="btn-primary">Start a Session</button></div>'),Kt=(f,w)=>f.key==="Escape"&&w(),Qt=f=>f.stopPropagation(),te=f=>f.stopPropagation(),ee=m('<div class="response-field svelte-bxfdlt"><strong class="svelte-bxfdlt">Answer:</strong> </div>'),se=m('<div class="response-field svelte-bxfdlt"><strong class="svelte-bxfdlt">Rating:</strong> </div>'),ae=m('<div class="response-item card svelte-bxfdlt"><div class="response-header svelte-bxfdlt"><span class="question-id svelte-bxfdlt"> </span></div> <div class="response-content svelte-bxfdlt"><!> <!></div></div>'),le=m('<div class="modal-overlay svelte-bxfdlt" role="dialog" tabindex="-1"><div class="modal-content card svelte-bxfdlt" role="dialog" tabindex="0"><div class="modal-header svelte-bxfdlt"><div><h2 class="svelte-bxfdlt">Session Details</h2> <p class="modal-subtitle svelte-bxfdlt"> </p></div> <button class="btn-close svelte-bxfdlt">âœ•</button></div> <div class="modal-body svelte-bxfdlt"><div class="detail-section svelte-bxfdlt"><h3 class="svelte-bxfdlt">Session Information</h3> <div class="detail-grid svelte-bxfdlt"><div class="detail-item svelte-bxfdlt"><span class="detail-label svelte-bxfdlt">Session ID:</span> <span class="detail-value svelte-bxfdlt"> </span></div> <div class="detail-item svelte-bxfdlt"><span class="detail-label svelte-bxfdlt">Template:</span> <span class="detail-value svelte-bxfdlt"> </span></div> <div class="detail-item svelte-bxfdlt"><span class="detail-label svelte-bxfdlt">Start Time:</span> <span class="detail-value svelte-bxfdlt"> </span></div> <div class="detail-item svelte-bxfdlt"><span class="detail-label svelte-bxfdlt">End Time:</span> <span class="detail-value svelte-bxfdlt"> </span></div> <div class="detail-item svelte-bxfdlt"><span class="detail-label svelte-bxfdlt">Duration:</span> <span class="detail-value svelte-bxfdlt"> </span></div> <div class="detail-item svelte-bxfdlt"><span class="detail-label svelte-bxfdlt">Overall Rating:</span> <span class="detail-value svelte-bxfdlt"><!></span></div></div></div> <div class="detail-section svelte-bxfdlt"><h3 class="svelte-bxfdlt">Responses</h3> <div class="responses-list svelte-bxfdlt"></div></div></div> <div class="modal-footer svelte-bxfdlt"><button class="btn-secondary">Close</button></div></div></div>'),ie=m('<div class="results-page svelte-bxfdlt"><div class="page-header svelte-bxfdlt"><button class="btn-back svelte-bxfdlt">â† Back to Home</button> <h1 class="svelte-bxfdlt">ğŸ“Š Session Results</h1> <div class="header-actions svelte-bxfdlt"><button class="btn-info btn-sm">ğŸ“¥ Export Data</button> <button class="btn-danger btn-sm">ğŸ—‘ï¸ Clear All</button></div></div> <!></div> <!>',1);function pe(f,w){It(w,!0);let C=y(qt([])),D=y(null),r=y(null),$=y(!1);Et(()=>{const a=dt.sessions.subscribe(v=>{x(C,v,!0)}),l=Jt.subscribe(v=>{x(D,v,!0)});return()=>{a(),l()}});function ot(a){const l=Math.floor(a/3600),v=Math.floor(a%3600/60),n=a%60;return l>0?`${l}h ${v}m ${n}s`:v>0?`${v}m ${n}s`:`${n}s`}function P(a){const l=new Date(a);return l.toLocaleDateString()+" "+l.toLocaleTimeString()}function ct(a){x(r,a,!0),x($,!0)}function k(){x($,!1),x(r,null)}function bt(){const a=JSON.stringify({sessions:i(C),stats:i(D)},null,2),l=new Blob([a],{type:"application/json"}),v=URL.createObjectURL(l),n=document.createElement("a");n.href=v,n.download=`session-data-${new Date().toISOString().split("T")[0]}.json`,n.click(),URL.revokeObjectURL(v)}var V=ie(),R=Ct(V),T=e(R),Y=e(T);Y.__click=[nt];var G=s(Y,4),H=e(G);H.__click=bt;var ft=s(H,2);ft.__click=[zt],t(G),t(T);var pt=s(T,2);{var _t=a=>{Zt(a,{showTable:!0,onViewDetails:ct})},ut=a=>{var l=Ft(),v=s(e(l),6);v.__click=[nt],t(l),b(a,l)};S(pt,a=>{i(D)?a(_t):a(ut,!1)})}t(R);var xt=s(R,2);{var mt=a=>{var l=le();l.__click=k,l.__keydown=[Kt,k];var v=e(l);v.__click=[Qt],v.__keydown=[te];var n=e(v),A=e(n),J=s(e(A),2),gt=e(J,!0);t(J),t(A);var ht=s(A,2);ht.__click=k,t(n);var L=s(n,2),N=e(L),W=s(e(N),2),O=e(W),X=s(e(O),2),St=e(X,!0);t(X),t(O);var j=s(O,2),Z=s(e(j),2),kt=e(Z,!0);t(Z),t(j);var M=s(j,2),z=s(e(M),2),yt=e(z,!0);t(z),t(M);var U=s(M,2),F=s(e(U),2),wt=e(F,!0);t(F),t(U);var B=s(U,2),K=s(e(B),2),Dt=e(K,!0);t(K),t(B);var Q=s(B,2),tt=s(e(Q),2),$t=e(tt);{var Rt=d=>{var c=rt();h(u=>o(c,`${i(r).overallRating??""}/5 ${u??""}`),[()=>"â­".repeat(i(r).overallRating)]),b(d,c)},Tt=d=>{var c=rt("N/A");b(d,c)};S($t,d=>{i(r).overallRating?d(Rt):d(Tt,!1)})}t(tt),t(Q),t(W),t(N);var et=s(N,2),st=s(e(et),2);Gt(st,21,()=>Object.entries(i(r).responses),Ht,(d,c)=>{var u=Vt(()=>Yt(i(c),2));let Lt=()=>i(u)[0],g=()=>i(u)[1];var E=ae(),I=e(E),lt=e(I),Nt=e(lt,!0);t(lt),t(I);var it=s(I,2),vt=e(it);{var Ot=p=>{var _=ee(),q=s(e(_));t(_),h(()=>o(q,` ${g().answer??""}`)),b(p,_)};S(vt,p=>{g().answer&&p(Ot)})}var jt=s(vt,2);{var Mt=p=>{var _=se(),q=s(e(_));t(_),h(Ut=>o(q,` ${g().rating??""}/5 ${Ut??""}`),[()=>"â­".repeat(g().rating)]),b(p,_)};S(jt,p=>{g().rating!==void 0&&p(Mt)})}t(it),t(E),h(()=>o(Nt,Lt())),b(d,E)}),t(st),t(et),t(L);var at=s(L,2),At=e(at);At.__click=k,t(at),t(v),t(l),h((d,c,u)=>{o(gt,i(r).templateName),o(St,i(r).id),o(kt,i(r).templateName),o(yt,d),o(wt,c),o(Dt,u)},[()=>P(i(r).startTime),()=>i(r).endTime?P(i(r).endTime):"N/A",()=>ot(i(r).duration)]),b(a,l)};S(xt,a=>{i($)&&i(r)&&a(mt)})}b(f,V),Pt()}Bt(["click","keydown"]);export{pe as component};

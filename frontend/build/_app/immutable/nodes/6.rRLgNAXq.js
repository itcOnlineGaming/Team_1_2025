import"../chunks/DsnmJJEf.js";import{i as W}from"../chunks/cVA9912C.js";import{o as Y,s as Z}from"../chunks/CIQPcZhh.js";import{R as q,S as g,T as u,U as l,V as z,W as i,o as _,g as p,Y as C,Z as w,$ as y,a5 as A,a0 as B}from"../chunks/trG2P9-e.js";import{i as b,a as D,s as E}from"../chunks/TCXrzA7w.js";import{s as F,b as T,g as k}from"../chunks/UzgXwaK6.js";import{s as G}from"../chunks/OSfEqomL.js";import{C as H}from"../chunks/C-2oHr1L.js";const J=()=>{const s=F;return{page:{subscribe:s.page.subscribe},navigating:{subscribe:s.navigating.subscribe},updated:s.updated}},K={subscribe(s){return J().page.subscribe(s)}};var N=C('<div class="loading svelte-2illxl"><div class="spinner svelte-2illxl"></div> <p class="svelte-2illxl">Loading template...</p></div>'),O=C('<div class="error-container svelte-2illxl"><div class="error-message svelte-2illxl"> </div> <p class="svelte-2illxl">Redirecting to templates page...</p></div>');function oe(s,$){q($,!1);const L=()=>E(K,"$page",x),M=()=>E(G,"$selectedTemplate",x),[x,R]=D();let n=_(null),v=_(!0),m=_("");Y(async()=>{const e=L().params.id,t=M();if(t&&t.id===e){i(n,t),i(v,!1);return}try{const a=await fetch(`${T}/api/templates/${e}`);a.ok?i(n,await a.json()):(i(m,"Template not found"),setTimeout(()=>k(`${T}/templates/view`),2e3))}catch(a){i(m,`Error loading template: ${a}`),setTimeout(()=>k(`${T}/templates/view`),2e3)}finally{i(v,!1)}}),W();var h=g(),S=u(h);{var j=e=>{var t=N();l(e,t)},I=e=>{var t=g(),a=u(t);{var U=r=>{var o=O(),c=w(o),d=w(c,!0);y(c),A(2),y(o),B(()=>Z(d,p(m))),l(r,o)},V=r=>{var o=g(),c=u(o);{var d=f=>{H(f,{get initialTemplate(){return p(n)},isEditMode:!0})};b(c,f=>{p(n)&&f(d)},!0)}l(r,o)};b(a,r=>{p(m)?r(U):r(V,!1)},!0)}l(e,t)};b(S,e=>{p(v)?e(j):e(I,!1)})}l(s,h),z(),R()}export{oe as component};
